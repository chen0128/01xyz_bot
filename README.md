# 01Trade 网格交易机器人使用教程

## 项目概述

这是一个基于01Trade平台的BTC稳健非等距网格交易机器人。该机器人采用非等距网格策略，在价格波动较大时能够更好地适应市场变化。

01Trade 网格交易脚本

作者: 黑大王
推特: https://x.com/Pengchenop
内测邀请码: https://01.xyz/ref/heidawang
说明: 脚本仅用于学习与模拟交易，不构成投资建议

![alt text](image.png)

## 文件结构

- `btc_50_grid0_bot.py` - 主要的网格交易机器人
- `zo_sdk.py` - 01Trade平台的SDK接口
- `session.py` - 用于创建会话的工具
- `exchange.py` - 私钥格式转换工具
- `schema.proto/schema_pb2.py` - 协议定义文件

## 安装准备

### 1. 安装依赖包

```bash
pip install requests websockets base58 cryptography protobuf
```

### 2. 准备私钥

你需要有01Trade平台的账户私钥，通常以Base58格式提供。

## 使用步骤

### 第一步：私钥格式转换

如果你的私钥是Base58格式，请使用`exchange.py`进行格式转换：

1. 编辑`exchange.py`文件，将第5行的空字符串替换为你的Base58格式私钥：
   ```python
   base58_string = "你的Base58格式私钥"
   ```

2. 运行`exchange.py`：
   ```bash
   python exchange.py
   ```
   
   这将生成`id.json`文件，其中包含了转换后的私钥数据。

### 第二步：创建会话

使用`session.py`创建交易会话：

1. 确保你已经生成了`id.json`文件
2. 运行`session.py`：
   ```bash
   python session.py
   ```
   
   这将创建一个`session_cache.json`文件，其中包含了有效的会话信息。
   
   **注意**：如果遇到"USER_NOT_FOUND"错误，说明你的账户尚未激活，请先访问01Trade官网并存入任意金额来激活账户。

### 第三步：运行网格机器人

确保已经生成了`session_cache.json`文件后，运行主机器人程序：

```bash
python btc_50_grid0_bot.py
```

机器人将开始自动执行网格交易策略。

## 机器人配置参数

在`btc_50_grid0_bot.py`中，你可以根据需要修改以下参数：

- `market_id`: 交易对ID，默认为0（BTC）
- `num_grids_per_side`: 每侧网格数量，默认为20
- `order_size`: 订单大小，默认为0.005 BTC
- `refresh_interval`: 刷新间隔（秒），默认为5秒
- `base_step`: 基础步长，默认为0.0004
- `step_multiplier`: 步长倍数，默认为1.015
- `rebalance_threshold`: 再平衡阈值，默认为0.008（0.8%）

## 机器人工作原理

1. **网格初始化**：机器人获取当前市场价格作为中心价，然后在中心价两侧按照非等距算法生成网格订单
2. **订单同步**：定期检查现有订单，确保网格完整
3. **再平衡**：当市场价格偏离中心价超过阈值时，取消所有订单并重新设置网格
4. **持续运行**：循环执行订单同步和再平衡操作

## SDK功能说明

`zo_sdk.py`提供了以下功能：

- 市场数据查询（价格、订单簿、交易记录）
- 账户信息查询（余额、持仓、订单）
- 限价单和市价单下单
- 订单取消
- 实时K线数据流

## 注意事项

1. **风险提示**：加密货币交易存在高风险，请只投入你能承受损失的资金
2. **资金安全**：私钥文件请妥善保管，避免泄露
3. **网络连接**：确保稳定的网络连接，避免因断网导致的交易异常
4. **参数调整**：根据市场情况适当调整网格参数
5. **监控账户**：定期检查账户状态和交易记录

## 常见问题

Q: 运行`session.py`时出现"USER_NOT_FOUND"错误怎么办？
A: 说明你的账户尚未在01Trade平台激活，请先访问官网并存入任意金额激活账户。

Q: 机器人运行后没有下单是什么原因？
A: 检查`session_cache.json`是否正确生成，以及账户是否有足够余额。

Q: 如何停止机器人？
A: 按下`Ctrl+C`组合键即可安全停止机器人。

## 免责声明

本脚本仅供学习与模拟交易使用，不构成任何投资建议。加密货币交易存在高风险，可能导致部分或全部本金损失。请根据自身财务状况谨慎投资。
